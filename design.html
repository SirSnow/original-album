<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="keywords" content="原画册,原画册官网,yuanhuace,O-Album,原画册摄影,手机摄影,摄影,原画册手机摄影,原画册韩松,韩松"/>
    <meta name="full-screen" content="true">
    <meta name="x5-fullscreen" content="true">
    <meta name="360-fullscreen" content="true">
    <meta name="screen-orientation" content="portrait">
    <meta http-equiv="expires" content="0">
    <title>原画册</title>

    <!--引用样式部分-->
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/reset.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    <link href="css/responsive.css" rel="stylesheet">

</head>
<body>
<div class="nav-header">
    <!--一般显示用的banner-->
    <div class="nav-pc nav-pc-follow none-display" >
        <ul class="list-follow">
            <li class="list-follow-item weixin-follow"><a href=""></a></li>
            <li class="list-follow-item weibo-follow"><a href="https://weibo.com/originalalbum"></a></li>
            <li class="list-follow-item zhihu-follow"><a href="https://www.zhihu.com/people/oalbum/answers"></a></li>
            <li class="list-follow-item lofter-follow"><a href="http://o-album.lofter.com/"></a></li>
        </ul>
        <div class="nav-copyright">copy right © 原画册</div>
        <div class="follow-close-btn" id="follow-close"><img src="img/cross.png"></div>
    </div>

    <div class="nav-pc">
        <div class="nav-pc_logo"><a href="index.html"></a></div>
        <ul class="list-nav">
            <li class="list-nav-item"><a href="photos.html">PHOTO</a></li>
            <li class="list-nav-item"><a href="design.html">DESIGN</a></li>
            <li class="list-nav-item"><a href="events.html">EVENT</a></li>
            <li class="list-nav-item"><a href="team.html">TEAM</a></li>
            <li class="list-nav-item"><a href="contact.html">CONTACT</a></li>
        </ul>
        <div class="nav-btn"><div class="nav-btn-text" id="follow-open">FOLLOW US</div></div>
    </div>
    <div id="searchIndex" class="nav-pc nav-search">
        <div class="nav-main_inner">
           <ul class="listSelect only-pc">
               <div id="listTag" class="listSelectItem">全部标签</div>
               <div class="overlay overlay-filter-tag" >
                   <ul class="list-filter" data-filter-group="tag">
                       <li id="tagAll" data-value="全部标签" data-filter="" class="list-filter-item tag-item">全部标签</li>
                       <li id="tagCard" data-value="卡片计划" data-filter=".卡片计划" class="list-filter-item tag-item">卡片计划</li>
                   </ul>
               </div>
               <div id="listYear" class="listSelectItem">全部年份</div>
               <div class="overlay overlay-filter-year" >
                   <ul class="list-filter" data-filter-group="year">
                       <li id="yearAll" data-value="全部年份" data-filter="" class="list-filter-item year-item">全部年份</li>
                       <li id="year2017" data-value="2017" data-filter=".2017" class="list-filter-item year-item">2017</li>
                       <li id="year2016" data-value="2016" data-filter=".2016" class="list-filter-item year-item">2016</li>
                       <li id="year2015" data-value="2015" data-filter=".2015" class="list-filter-item year-item">2015</li>
                       <li id="year2013" data-value="2013" data-filter=".2013" class="list-filter-item year-item">2013</li>
                   </ul>
               </div>
           </ul>
        </div>
    </div>
</div>

<div class="main-pc list-work">
    <ul class="list-btn">
        <li><a href="#">#<span class="Result">0</span>个结果#</a></li>
    </ul>
    <ul class="list-event resultItem">


    </ul>

</div>

<script src="js/jquery-3.2.1.min.js"></script>
<script src="js/isotope.pkgd.min.js"></script>
<script src="js/objs.js"></script>
<script src="js/main.js"></script>
<script>
    var card='<li id="card%data1%" class="work-col"><div class="paper paper-work"><img class="card-img" src="%data2%"/><div class="work-title"><h4><span>%data3%</span></h4></div></div></li>'

    window.onload=function () {
        Reset(designSet);
    };
        ///////////////////////////////////
    var filters = {};

    $('.list-filter').on( 'click', '.list-filter-item', function() {
            var $this = $(this);
            // get group key
            var $buttonGroup = $this.parents('.list-filter');
            var filterGroup = $buttonGroup.attr('data-filter-group');
            // set filter for group
            filters[ filterGroup ] = $this.attr('data-filter');
            // combine filters
            var filterValue = '';
            for ( var prop in filters ) {
                filterValue += filters[ prop ];
            }
            console.log(filterValue);
            // set filter for Isotope
            $('.resultItem').isotope({ filter:filterValue});
            var $grid=$('.resultItem').isotope({ filter:filterValue});
            var iso = $grid.data('isotope');
            var num=iso.filteredItems.length;
            $('.Result').text(num);
//        console.log(num);

    });

       /* $('.tag-item').click(function () {
            Reset(designSet);
        });
        $('#yearAll').click(function(){
            Reset(designSet);
        });
        $('#year2017').click(function () {
            Refresh(designSet,2017);
        });
        $('#year2016').click(function () {
            Refresh(designSet,2016);
        });
        $('#year2015').click(function () {
            Refresh(designSet,2015);
        });
        $('#year2013').click(function () {
            Refresh(designSet,2013);
        });*/
        ///////////////////////////////////


    function Refresh(dataSet,para1){
        $('.work-col').remove();
        var i=0;
        for(var j=0;j<dataSet.length;j++){
            Replace(j,dataSet[j].ava,dataSet[j].title);

            if(dataSet[j].tag[0]==para1){
                i++;
            }else{
                $('#card'+j).hide();
            }

            $('.Result').text(i);
        }

        gotoDesignDetail();
    }
    function Reset(dataSet){
        $('.Result').text(dataSet.length);
        $('.work-col').remove();
        for(var j=0;j<dataSet.length;j++){
            Replace(j,dataSet[j].ava,dataSet[j].title);
            for(var m=0;m<dataSet[j].tag.length;m++){
                $('#card'+j).addClass(dataSet[j].tag[m]);
            }
        }

        gotoDesignDetail();
    }
    function Replace(data1,data2,data3){
        $('.resultItem').append(card.replace("%data1%",data1).replace("%data2%",data2).replace("%data3%",data3));
    }
    function gotoDesignDetail() {

        $("[id^=card]").click( function () {
            var id=parseInt($(this).attr("id").split("card")[1]);

            localStorage.setItem('design-title', designSet[id].title);
            localStorage.setItem('design-tag', designSet[id].tag);
            localStorage.setItem('design-work', designSet[id].work);
            localStorage.setItem('design-desc', designSet[id].desc);
            window.location.href="design-detail.html";

        });
    }

</script>
</body>
</html>